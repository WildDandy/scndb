<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{PAGE_TITLE}}</title>

    <!-- CRITICAL: Apply theme immediately before stylesheets load -->
    <script>
        // Inline theme application to prevent FOUC
        (function() {
            const savedMode = localStorage.getItem('viewMode') || 'clean';
            console.log('Immediate theme application:', savedMode);

            if (savedMode === 'clean') {
                document.documentElement.classList.add('clean-view-loading');
                document.documentElement.style.background = '#ffffff';
            } else {
                document.documentElement.style.background = '#000000';
            }
        })();
    </script>

    <!-- Unified CSS System -->
    <link rel="stylesheet" href="{{CSS_BASE_PATH}}/shared/css/base.css" />
    <link rel="stylesheet" href="{{CSS_BASE_PATH}}/shared/css/layout.css" />
    <link rel="stylesheet" href="{{CSS_BASE_PATH}}/shared/css/components.css" />
    <link rel="stylesheet" href="{{CSS_BASE_PATH}}/shared/css/effects.css" />
    <link rel="stylesheet" href="{{CSS_BASE_PATH}}/shared/css/responsive.css" />
    <link rel="stylesheet" href="{{CSS_BASE_PATH}}/shared/css/themes.css" />
    
    <!-- Manual Navigation Configuration -->
    <script>
        // Define manual navigation links for this page
        window.navigationConfig = {
            navLinks: [
                {{NAVIGATION_LINKS}}
            ],
            currentPage: '{{CURRENT_PAGE}}'
        };
        
        // Initialize navigation with manual configuration
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                window.initializeNavigation(window.navigationConfig);
            });
        } else {
            window.initializeNavigation(window.navigationConfig);
        }
    </script>
</head>
<body>
    <!-- Scan line effect -->
    <div class="scan-line"></div>

    <!-- Navigation will be dynamically injected by navigation-component.js -->
    <header class="master-header header-full-width">
        <!-- Navigation component will be injected here -->
    </header>

    <!-- HERO COMPONENT -->
    <section class="hero">
        <div class="container">
            {{HERO_CONTENT}}
        </div>
    </section>

    <!-- MAIN CONTENT AREA -->
    <!-- 
        Layout System:
        - Desktop: CSS Grid with sidebar (grid-template-columns: var(--sidebar-width) 1fr)
        - Mobile: Single column (grid-template-columns: 1fr)
        - Responsive breakpoint: 768px
        - Sidebar hidden on mobile with display: none !important
    -->
    <div class="container">
        <div class="main-content">
            {{MAIN_CONTENT}}
        </div>
    </div>

    <!-- FOOTER COMPONENT -->
    <footer class="footer">
        <div class="container">
            {{FOOTER_CONTENT}}
        </div>
    </footer>

    <!-- Page-specific scripts -->
    {{PAGE_SCRIPTS}}

    <!-- Unified JavaScript from shared folder -->
    <script src="{{JS_BASE_PATH}}/shared/js/theme-manager.js"></script>
    <script src="{{JS_BASE_PATH}}/shared/js/navigation-component.js"></script>
    <script src="{{JS_BASE_PATH}}/shared/js/app.js" defer></script>
</body>
</html>