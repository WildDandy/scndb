<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Example Page - SCNDB</title>

    <!-- CRITICAL: Apply theme immediately before stylesheets load -->
    <script>
        // Inline theme application to prevent FOUC
        (function() {
            const savedMode = localStorage.getItem('viewMode') || 'clean';
            console.log('Immediate theme application:', savedMode);

            if (savedMode === 'clean') {
                document.documentElement.classList.add('clean-view-loading');
                document.documentElement.style.background = '#ffffff';
            } else {
                document.documentElement.style.background = '#000000';
            }
        })();
    </script>

    <!-- Unified CSS System -->
    <link rel="stylesheet" href="../css/base.css" />
    <link rel="stylesheet" href="../css/layout.css" />
    <link rel="stylesheet" href="../css/components.css" />
    <link rel="stylesheet" href="../css/effects.css" />
    <link rel="stylesheet" href="../css/responsive.css" />
    <link rel="stylesheet" href="../css/themes.css" />
    
    <!-- Manual Navigation Configuration -->
    <script>
        // Define manual navigation links for this page
        window.navigationConfig = {
            navLinks: [
                { key: 'home', label: 'HOME', href: '../index.html' },
                { key: 'example', label: 'EXAMPLE', href: './example-implementation.html' },
                { key: 'template', label: 'TEMPLATE', href: './master-layout.html' }
            ],
            currentPage: 'example'
        };
        
        // Initialize navigation with manual configuration
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                window.initializeNavigation(window.navigationConfig);
            });
        } else {
            window.initializeNavigation(window.navigationConfig);
        }
    </script>
</head>
<body>
    <!-- Scan line effect -->
    <div class="scan-line"></div>

    <!-- Navigation will be dynamically injected by navigation-component.js -->
    <header class="master-header header-full-width">
        <!-- Navigation component will be injected here -->
    </header>

    <!-- HERO COMPONENT -->
    <section class="hero">
        <div class="container">
            <div class="classified-banner">ðŸ“‹ TEMPLATE EXAMPLE ðŸ“‹</div>
            <h1>Master Layout Example</h1>
            <div class="hero-subtitle">
                <span class="typewriter">Demonstrating the responsive layout system</span>
            </div>
        </div>
    </section>

    <!-- MAIN CONTENT AREA -->
    <!-- 
        Layout System:
        - Desktop: CSS Grid with sidebar (grid-template-columns: var(--sidebar-width) 1fr)
        - Mobile: Single column (grid-template-columns: 1fr)
        - Responsive breakpoint: 768px
        - Sidebar hidden on mobile with display: none !important
    -->
    <div class="container">
        <div class="main-content">
            <!-- SIDEBAR COMPONENT -->
            <aside class="sidebar">
                <h3>Template Features</h3>
                <ul class="file-tree">
                    <li data-section="responsive" onclick="scrollToSection('responsive', this)">Responsive Layout</li>
                    <li data-section="components" onclick="scrollToSection('components', this)">Components</li>
                    <li data-section="themes" onclick="scrollToSection('themes', this)">Theme System</li>
                    <li data-section="navigation" onclick="scrollToSection('navigation', this)">Navigation</li>
                </ul>
                
                <h3 class="quick-stats-title">Layout Stats</h3>
                <div class="sidebar-quick-stats">
                    <div>Breakpoint: <span class="text-accent">768px</span></div>
                    <div>Desktop: <span class="text-accent">Grid</span></div>
                    <div>Mobile: <span class="text-accent">Stack</span></div>
                    <div>Sidebar: <span class="text-accent">Hidden</span></div>
                </div>
            </aside>

            <!-- CONTENT AREA -->
            <main class="content-area">
                <div class="document-header">
                    <div class="doc-title">Master Layout Template</div>
                    <div class="doc-meta">Responsive | Flexible | Consistent</div>
                </div>

                <div class="document-content">
                    <!-- EXPANDABLE SECTION COMPONENT -->
                    <div class="section-block">
                        <div class="section-header" tabindex="0" role="button" aria-expanded="false">
                            <div class="section-title_toggle">â–¸ Responsive Layout System</div>
                        </div>
                        <div class="section-content" id="responsive">
                            <p>The master template uses CSS Grid for flexible layouts that automatically adapt from horizontal (desktop) to vertical (mobile) orientations.</p>
                            
                            <div class="callout">
                                <strong class="text-accent">DESKTOP (769px+):</strong> Two-column grid with sidebar and main content area side by side.
                            </div>

                            <div class="callout">
                                <strong class="text-accent">MOBILE (768px and below):</strong> Single column stack with sidebar hidden and content taking full width.
                            </div>
                        </div>
                    </div>

                    <div class="section-block">
                        <div class="section-header" tabindex="0" role="button" aria-expanded="false">
                            <div class="section-title_toggle">â–¸ Included Components</div>
                        </div>
                        <div class="section-content" id="components">
                            <p>The template includes all essential components from the original design:</p>
                            
                            <div class="bullet-accent">
                                <strong>â€¢ Header:</strong> Fixed navigation with mobile hamburger menu
                            </div>
                            <div class="bullet-accent">
                                <strong>â€¢ Hero Section:</strong> Customizable banner area with typewriter effect
                            </div>
                            <div class="bullet-accent">
                                <strong>â€¢ Main Content:</strong> Flexible grid layout with sidebar support
                            </div>
                            <div class="bullet-accent">
                                <strong>â€¢ Footer:</strong> Consistent bottom section
                            </div>
                            <div class="bullet-accent">
                                <strong>â€¢ Scan Line:</strong> Terminal-style visual effect
                            </div>
                        </div>
                    </div>

                    <div class="section-block">
                        <div class="section-header" tabindex="0" role="button" aria-expanded="false">
                            <div class="section-title_toggle">â–¸ Theme Integration</div>
                        </div>
                        <div class="section-content" id="themes">
                            <p>Full theme system integration with clean and terminal modes, including FOUC prevention.</p>
                        </div>
                    </div>

                    <div class="section-block">
                        <div class="section-header" tabindex="0" role="button" aria-expanded="false">
                            <div class="section-title_toggle">â–¸ Navigation System</div>
                        </div>
                        <div class="section-content" id="navigation">
                            <p>Configurable navigation with automatic mobile menu transformation and current page highlighting.</p>
                        </div>
                    </div>
                </div>

                <!-- STATS BAR COMPONENT -->
                <div class="stats-bar">
                    <div class="stat-item">Template: <span class="stat-value">Master</span></div>
                    <div class="stat-item">Layout: <span class="stat-value">Responsive</span></div>
                    <div class="stat-item">Components: <span class="stat-value">Complete</span></div>
                    <div class="stat-item">Status: <span class="stat-value">READY</span></div>
                </div>
            </main>
        </div>
    </div>

    <!-- FOOTER COMPONENT -->
    <footer class="footer">
        <div class="container">
            <p>Master Layout Template - Responsive Design System<br>
            Based on OSA Network Orders layout structure.</p>
        </div>
    </footer>

    <!-- Section navigation script -->
    <script>
         function scrollToSection(sectionId, clickedElement) {
             console.log('[Sidebar] scrollToSection called:', sectionId, clickedElement);
 
             // Use the unified toggleSection logic (opens panel, updates header, smooth scrolls)
             if (typeof toggleSection === 'function') {
                 // Force open so repeated clicks won't close the section
                 toggleSection(sectionId, true);
             } else {
                 // Fallback if shared app.js hasn't loaded yet
                 const content = document.getElementById(sectionId);
                 if (content) {
                     content.classList.add('active');
                 }
             }
 
             // Update active state in the sidebar
             document.querySelectorAll('.file-tree li').forEach(li => {
                 li.classList.remove('active');
             });
             if (clickedElement) {
                 clickedElement.classList.add('active');
             }
         }
 
         // Add active state to responsive by default
         document.addEventListener('DOMContentLoaded', function() {
             const responsiveLink = document.querySelector('[data-section="responsive"]');
             if (responsiveLink) {
                 responsiveLink.classList.add('active');
             }
         });
     </script>

    <!-- Unified JavaScript from shared folder -->
    <script src="../js/theme-manager.js"></script>
    <script src="../js/navigation-component.js"></script>
    <script src="../js/app.js" defer></script>
</body>
</html>