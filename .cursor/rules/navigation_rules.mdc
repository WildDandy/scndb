---
name: Navigation Rules
---

## Site Structure Overview
- **Root site**: Main index.html with no top menu (card-based navigation only)
- **Mini-sites**: Folders with their own index.html and navigation menus
- **Logo**: Always links to root index.html regardless of current location

## Navigation Patterns

### Root Site (/)
- **File**: `index.html`
- **Menu**: No top navigation buttons
- **Navigation**: Card-based sections linking to mini-sites
- **Logo**: Links to self (`./`)

### Mini-Site Navigation
Each folder (e.g., `osa-network-orders/`) contains:

#### Mini-Site Structure
```
osa-network-orders/
├── index.html          (HOME NW)
├── search_results.html (SEARCH)
├── glossary.html       (GLOSSARY)
└── orders/             (individual order pages)
```

#### Menu Button Logic
- **HOME NW**: Links to folder's index.html (`./index.html` or `./`)
- **SEARCH**: Links to `./search_results.html`
- **GLOSSARY**: Links to `./glossary.html`
- **Logo [SCNDB]**: Always links to root (`../index.html` or `../../index.html`)

## Path Rules by Depth

### Root Pages (`/`)
```html
<!-- Logo always goes to root -->
<a href="./">[SCNDB]</a>
<!-- No menu buttons on root -->
```

### Mini-Site Pages (`/folder/`)
```html
<!-- Logo goes up to root -->
<a href="../">[SCNDB]</a>
<!-- Menu buttons stay within folder -->
<a href="./">HOME NW</a>
<a href="./search_results.html">SEARCH</a>
<a href="./glossary.html">GLOSSARY</a>
```

### Deep Pages (`/folder/orders/`)
```html
<!-- Logo goes up two levels to root -->
<a href="../../">[SCNDB]</a>
<!-- Menu buttons go up one level to mini-site -->
<a href="../">HOME NW</a>
<a href="../search_results.html">SEARCH</a>
<a href="../glossary.html">GLOSSARY</a>
```

## Navigation Function Requirements

### updateGlobalNav() Function
Must handle different navigation contexts:
- **Root context**: Show only logo, no menu buttons
- **Mini-site context**: Show logo + mini-site menu buttons
- **Deep context**: Adjust paths for mini-site navigation

### Implementation Pattern
```javascript
function updateGlobalNav() {
    // Detect current location depth
    const pathDepth = window.location.pathname.split('/').length - 2;
    
    // Logo always points to root
    const logoPath = pathDepth === 0 ? './' : '../'.repeat(pathDepth);
    
    // Menu buttons adjust based on context
    if (isRootPage()) {
        hideMenuButtons();
    } else {
        showMenuButtons();
        updateMenuPaths(pathDepth);
    }
}
```

## Mini-Site Examples

### OSA Network Orders
- **Folder**: `osa-network-orders/`
- **HOME NW**: `./index.html`
- **SEARCH**: `./search_results.html` 
- **GLOSSARY**: `./glossary.html`

### OT Level Materials
- **Folder**: `ot-level-materials/`
- **HOME**: `./index.html`
- **SEARCH**: `./search_results.html`
- **GLOSSARY**: `./glossary.html`

## Header Template Structure
```html
<header class="master-header">
    <div class="header-content">
        <!-- Logo - always to root -->
        <div class="logo">
            <a href="../">[SCNDB]</a>
        </div>
        
        <!-- Navigation - only in mini-sites -->
        <nav class="top-nav" id="topNav">
            <a href="./" class="nav-btn">HOME NW</a>
            <a href="./search_results.html" class="nav-btn">SEARCH</a>
            <a href="./glossary.html" class="nav-btn">GLOSSARY</a>
        </nav>
        
        <!-- Theme toggle -->
        <div class="view-toggle">
            <!-- theme toggle content -->
        </div>
    </div>
</header>
```

## CSS Classes for Context
```css
/* Root page - hide navigation */
body.root-page .top-nav {
    display: none;
}

/* Mini-site pages - show navigation */
body.minisite-page .top-nav {
    display: flex;
}
```

## JavaScript Detection
```javascript
// Detect page context
function getPageContext() {
    const path = window.location.pathname;
    if (path === '/' || path.endsWith('/index.html')) {
        return path.split('/').length <= 2 ? 'root' : 'minisite';
    }
    return 'page';
}

// Apply body class based on context
document.body.classList.add(getPageContext() + '-page');
```

## Validation Checklist
- [ ] Logo always links to root site
- [ ] Root site has no top menu buttons
- [ ] Mini-site menu buttons navigate within folder
- [ ] Paths adjust correctly by depth level
- [ ] updateGlobalNav() handles all contexts
- [ ] Menu shows/hides based on page context